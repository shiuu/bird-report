<h1>New Report</h1>
<hr>
<div class="col-md-6">
  <form #newReportForm="ngForm" (ngSubmit)="saveReport(newReportForm.value)" autocomplete="off" novalidate>
    <div class="form-group" [ngClass]="{'error': newReportForm.controls.date?.invalid && newReportForm.controls.date?.touched}">
      <label for="reportDate">Date:</label>
      <em *ngIf="newReportForm.controls.date?.invalid && newReportForm.controls.date?.touched">Required</em>
        <!--
      <em *ngIf="newReportForm.controls.date?.invalid && newReportForm.controls.date?.touched && !newReportForm.controls.date?.errors.required">
        Date has to be in format (dd/mm/yyyy)</em>
      <input (ngModel)="newReport.date" name="date" required pattern="(3[01]|2[0-9]|1[0-9]|0[1-9]|[1-9])\/(1[012]|0[1-9]|[1-9])\/([1-9][0-9]{3})" 
          id="reportDate" type="text" class="form-control" placeholder="format (dd/mm/yyyy)..." />-->
      <input (ngModel)="newReport.date" name="date" required
      id="reportDate" type="date" class="form-control"/>
    </div>
    
    <div ngModelGroup="location" class="form-group">
      <div class="row">
        <div class="col-md-9 form-group" [ngClass]="{'error': newReportForm.controls.location?.place?.invalid && newReportForm.controls.location?.place?.touched}">
          <label for="place">Location:</label>
          <em *ngIf="newReportForm.controls.location?.place?.invalid && (newReportForm.controls.location?.place?.touched)">Required</em>
          <input (ngModel)="newReport.place" name="place" required id="place" type="text" class="form-control" placeholder="Address or description of the location..." />
        </div>
        <div class="col-md-3" >
          <div class="form-group" [ngClass]="{'error': newReportForm.controls.state?.invalid && newReportForm.controls.state?.touched }">
            <label for="state">State:</label>
            <em *ngIf="newReportForm.controls.state?.invalid && newReportForm.controls.state?.touched">Required</em>
            <!-- <select formControlName="state" class="form-control"> -->
            <select (ngModel)="newReport.state" name="state" required id="state" class="form-control">
              <option value="">select state...</option>
              <option value="ACT">ACT</option>
              <option value="NSW">NSW</option>
              <option value="QLD">QLD</option>
              <option value="SA">SA</option>
              <option value="VIC">VIC</option>
              <option value="WA">WA</option>
            </select>
          </div>
        </div>
      </div>
    </div>

    <div class="form-group" [ngClass]="{'error': newReportForm.controls.notes?.invalid && newReportForm.controls.notes?.touched}">
      <label for="notes">Notes:</label>
      <em *ngIf="newReportForm.controls.notes?.invalid && newReportForm.controls.notes?.touched && newReportForm.controls.notes?.errors?.required">Required</em>
      <textarea (ngModel)="newReport.notes" name="notes" required id="notes" rows="5" class="form-control" placeholder="Notes..."></textarea>
    </div>
    
    <button type="submit" [disabled]="newReportForm.invalid" class="btn btn-primary">Save</button>
    <button type="button" class="btn btn-default" (click)="cancel()">Cancel</button>
  </form>
</div>